{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\sites\\\\github\\\\courses\\\\sermon-outlines\\\\stephen-reynolds-jr\\\\Youth Revelation Study\\\\youth-bible-study\\\\pages\\\\editor.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, Component } from 'react';\nimport styles from '../styles/Revelation.module.css';\nimport Head from 'next/head';\nimport { withRouter } from \"next/router\";\nimport eStyles from './Editor.module.css';\nimport Line, { lineTypes, templates } from './Blocks/Line';\n\nfunction NewLineForm({\n  index,\n  handleNewLine\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: \"#dcdcdc\",\n      color: \"#dcdcdc\",\n      margin: \"15px\",\n      width: \"100%\",\n      textAlign: \"center\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        background: \"none\"\n      },\n      onSubmit: handleNewLine,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"index\",\n        value: index\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"raw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        style: {\n          background: \"none\"\n        },\n        name: \"lineType\",\n        id: \"lineTypes\" + index,\n        defaultValue: \"md\",\n        children: [lineTypes.map(function (t) {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t,\n            children: t\n          }, t, false, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 28\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"raw\",\n          children: \"raw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          background: \"none\"\n        },\n        type: \"submit\",\n        value: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 118\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 11\n  }, this);\n}\n\nfunction MoveToLessonForm({\n  index,\n  lesson,\n  handleMoveToLesson\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: \"#dcdcdc\",\n      color: \"#dcdcdc\",\n      margin: \"15px\",\n      width: \"100%\",\n      textAlign: \"center\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        background: \"none\"\n      },\n      onSubmit: handleMoveToLesson,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"index\",\n        value: index\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"lesson\",\n        defaultValue: lesson\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          background: \"none\"\n        },\n        type: \"submit\",\n        value: \"move to lesson\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 11\n  }, this);\n}\n\nfunction SelectLessonForm({\n  lesson,\n  handleSelectLesson\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: \"15px\",\n      width: \"100%\",\n      textAlign: \"center\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        background: \"none\"\n      },\n      onSubmit: handleSelectLesson,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"id\",\n        value: lesson.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          background: \"none\"\n        },\n        type: \"submit\",\n        value: \"Lesson \" + lesson.id + \" (\" + lesson.count + \")\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 11\n  }, this);\n}\n\nclass Editor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: false,\n      lineTypes: lineTypes,\n      lines: [],\n      lesson: 1,\n      lessons: [],\n      showRaw: false\n    };\n  }\n\n  componentDidMount() {\n    let lines = [];\n\n    if (localStorage.getItem(this.props.router.query.course) === null) {\n      lines = [];\n      localStorage.setItem('NEW', JSON.stringify(lines));\n    } else {\n      lines = JSON.parse(localStorage.getItem(this.props.router.query.course));\n    }\n\n    this.setState({\n      lines: lines,\n      lessons: this.getLessons(lines)\n    });\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.router.query.course !== this.props.router.query.course) {\n      const lines = JSON.parse(localStorage.getItem(this.props.router.query.course));\n      this.setState({\n        lines: lines,\n        lessons: this.getLessons(lines)\n      });\n    }\n  }\n\n  render() {\n    const handleNewLine = this.handleNewLine.bind(this);\n    const update = this.update.bind(this);\n    const deleteLine = this.deleteLine.bind(this);\n    const moveToLesson = this.handleMoveToLesson.bind(this);\n    const lesson = this.state.lesson;\n    const handleSelectLesson = this.handleSelectLesson.bind(this);\n    const showRaw = this.state.showRaw;\n    const toggleRaw = this.toggleRaw.bind(this);\n    const copyTextToClipboard = this.copyTextToClipboard.bind(this);\n    let rawStyle = {};\n\n    if (showRaw) {\n      rawStyle = {\n        display: \"block\"\n      };\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"Block Editor | Youth Revelation Study\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"icon\",\n          href: \"/favicon.ico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          charset: \"UTF-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            borderBottom: \"solid 2px gray\",\n            position: \"fixed\",\n            top: \"0\",\n            height: \"75px\",\n            backgroundColor: \"white\",\n            width: \"75%\",\n            marginTop: \"0\"\n          },\n          children: [\"Editor | Lesson \", this.state.lesson, \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.save.bind(this),\n            children: \"SAVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 180\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              float: \"right\",\n              fontSize: \".7rem\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"input-file\",\n              onChange: this.getFile.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 280\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 232\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"75px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: eStyles.row,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: eStyles.column + \" \" + eStyles.smallColumn,\n            children: this.state.lessons.map(function (less, k) {\n              return /*#__PURE__*/_jsxDEV(SelectLessonForm, {\n                lesson: less,\n                handleSelectLesson: handleSelectLesson\n              }, k, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 20\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: eStyles.column,\n            children: [/*#__PURE__*/_jsxDEV(NewLineForm, {\n              index: 0,\n              handleNewLine: handleNewLine\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this), this.state.lines.map(function (line, i) {\n              if (line.lesson === lesson) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: toggleRaw,\n                    children: \"raw\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 27\n                  }, this), \" >\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    readOnly: true,\n                    className: eStyles.raw,\n                    style: rawStyle,\n                    value: JSON.stringify(line),\n                    onClick: copyTextToClipboard\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: eStyles.row,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: eStyles.column,\n                      children: [/*#__PURE__*/_jsxDEV(Line, {\n                        index: i,\n                        data: line,\n                        update: update\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 142,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: {\n                          color: \"red\",\n                          marginLeft: \"15px\"\n                        },\n                        onClick: e => {\n                          deleteLine(i);\n                        },\n                        children: \"x\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(MoveToLessonForm, {\n                        index: i,\n                        lesson: line.lesson,\n                        handleMoveToLesson: moveToLesson\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: eStyles.column,\n                      style: {\n                        paddingLeft: \"15px\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Line, {\n                        index: i,\n                        data: line,\n                        read: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(NewLineForm, {\n                      index: i + 1,\n                      handleNewLine: handleNewLine\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 29\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 26\n                }, this);\n              }\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 2\n    }, this);\n  }\n\n  save() {\n    const txt = JSON.stringify(this.state.lines);\n    localStorage.setItem(this.props.router.query.course, txt); // Start file download.\n\n    this.download(this.props.router.query.course + \".json\", txt);\n  }\n\n  download(filename, text) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  getFile(event) {\n    const input = event.target;\n\n    if ('files' in input && input.files.length > 0) {\n      const lines = this.placeFileContent(input.files[0]).then(lines => {\n        this.setState({\n          lines: lines,\n          lessons: this.getLessons(lines)\n        });\n      });\n    }\n  }\n\n  placeFileContent(file) {\n    return this.readFileContent(file).then(content => {\n      return JSON.parse(content);\n    }).catch(error => console.log(error));\n  }\n\n  readFileContent(file) {\n    const reader = new FileReader();\n    return new Promise((resolve, reject) => {\n      reader.onload = event => resolve(event.target.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsText(file);\n    });\n  }\n\n  handleNewLine(e) {\n    e.preventDefault();\n    const lineType = e.target.lineType.value;\n    const index = e.target.index.value;\n\n    let newState = _objectSpread({}, this.state);\n\n    if (lineType === \"raw\") {\n      newState.lines.splice(index, 0, _objectSpread(_objectSpread({}, JSON.parse(e.target.raw.value)), {}, {\n        lesson: this.state.lesson\n      }));\n    } else {\n      newState.lines.splice(index, 0, _objectSpread(_objectSpread({}, templates[lineType]), {}, {\n        lesson: this.state.lesson\n      }));\n    }\n\n    newState.lessons = this.getLessons(newState.lines);\n    this.setState(_objectSpread({}, newState));\n  }\n\n  handleMoveToLesson(e) {\n    e.preventDefault();\n    const lesson = parseInt(e.target.lesson.value);\n    const index = e.target.index.value;\n\n    let newState = _objectSpread({}, this.state);\n\n    newState.lines[index].lesson = lesson;\n    newState.lessons = this.getLessons(newState.lines);\n    this.setState(_objectSpread({}, newState));\n  }\n\n  handleSelectLesson(e) {\n    e.preventDefault();\n    const id = e.target.id.value;\n\n    let newState = _objectSpread({}, this.state);\n\n    newState.lesson = parseInt(id);\n    this.setState(_objectSpread({}, newState));\n  }\n\n  update(line, data) {\n    let newState = _objectSpread({}, this.state);\n\n    newState.lines[line] = _objectSpread({}, data);\n    newState.lessons = this.getLessons(newState.lines);\n    this.setState(newState);\n  }\n\n  deleteLine(line) {\n    let newData = _objectSpread({}, this.state);\n\n    newData.lines.splice(line, 1);\n    newData.lessons = this.getLessons(newData.lines);\n    this.setState(newData);\n  }\n\n  getLessons(lines) {\n    let lessons = [];\n    let i;\n    let id = 0;\n    let lindex = 0;\n\n    for (i = 0; i < lines.length; i++) {\n      id = parseInt(lines[i].lesson);\n      lindex = id - 1;\n\n      if (lessons[lindex] === undefined) {\n        lessons[lindex] = {\n          id: id,\n          count: 1\n        };\n      } else {\n        lessons[lindex] = {\n          id: id,\n          count: lessons[lindex].count + 1\n        };\n      }\n    }\n\n    return lessons;\n  }\n\n  toggleRaw(e) {\n    let newState = _objectSpread({}, this.state);\n\n    newState.showRaw = !newState.showRaw;\n    this.setState(newState);\n  }\n\n  copyTextToClipboard(e) {\n    const context = e.target;\n    context.select();\n    document.execCommand(\"copy\");\n    alert(\"Copied to clipoard!\" + context.value);\n  }\n\n}\n\nexport default withRouter(Editor);\n/*\r\n1-4 Ellyanna\r\n5-11 Jeremiah\r\n12-16 Benjamin\r\n17-22 Rosemary\r\n\r\n1. Summaries\r\n2. Conclusing of Book 1 sentence\r\n\r\n\t\t<Quiz line={1} questions={this.state.questions} updateQuestion={updateQuestion}/>\r\n\r\n    */","map":{"version":3,"sources":["C:/sites/github/courses/sermon-outlines/stephen-reynolds-jr/Youth Revelation Study/youth-bible-study/pages/editor.js"],"names":["useState","Component","styles","Head","withRouter","eStyles","Line","lineTypes","templates","NewLineForm","index","handleNewLine","backgroundColor","color","margin","width","textAlign","background","map","t","MoveToLessonForm","lesson","handleMoveToLesson","SelectLessonForm","handleSelectLesson","id","count","Editor","constructor","props","state","file","lines","lessons","showRaw","componentDidMount","localStorage","getItem","router","query","course","setItem","JSON","stringify","parse","setState","getLessons","componentWillReceiveProps","newProps","render","bind","update","deleteLine","moveToLesson","toggleRaw","copyTextToClipboard","rawStyle","display","borderBottom","position","top","height","marginTop","save","float","fontSize","getFile","row","column","smallColumn","less","k","line","i","raw","marginLeft","e","paddingLeft","txt","download","filename","text","element","document","createElement","setAttribute","encodeURIComponent","style","body","appendChild","click","removeChild","event","input","target","files","length","placeFileContent","then","readFileContent","content","catch","error","console","log","reader","FileReader","Promise","resolve","reject","onload","result","onerror","readAsText","preventDefault","lineType","value","newState","splice","parseInt","data","newData","lindex","undefined","context","select","execCommand","alert"],"mappings":"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","sourcesContent":["import { useState, Component } from 'react'\r\nimport styles from '../styles/Revelation.module.css'\r\nimport Head from 'next/head'\r\nimport { withRouter } from \"next/router\"\r\nimport eStyles from './Editor.module.css'\r\n\r\nimport Line, {lineTypes, templates} from './Blocks/Line'\r\n\r\nfunction NewLineForm({index, handleNewLine}){\r\n  return (<div style={{backgroundColor:\"#dcdcdc\", color:\"#dcdcdc\", margin:\"15px\", width:\"100%\", textAlign:\"center\"}}><form style={{ background:\"none\"}} onSubmit={handleNewLine}>\r\n              <input type=\"hidden\" name=\"index\" value={index}/>\r\n              <input type=\"text\" name=\"raw\" />\r\n\r\n                <select style={{background:\"none\"}} name=\"lineType\" id={\"lineTypes\" + index} defaultValue=\"md\">\r\n                  {lineTypes.map(function(t){\r\n                    return <option key={t} value={t}>{t}</option>\r\n                  })}\r\n\r\n                  <option value=\"raw\">raw</option>\r\n          </select>\r\n       \r\n\r\n              <input style={{background:\"none\"}} type=\"submit\" value=\"+\" />\r\n            </form></div>)\r\n}\r\n\r\n\r\nfunction MoveToLessonForm({index, lesson, handleMoveToLesson}){\r\n  return (<div style={{backgroundColor:\"#dcdcdc\", color:\"#dcdcdc\", margin:\"15px\", width:\"100%\", textAlign:\"center\"}}>\r\n        <form style={{ background:\"none\"}} onSubmit={handleMoveToLesson}>\r\n              <input type=\"hidden\" name=\"index\" value={index}/>\r\n              <input type=\"text\" name=\"lesson\" defaultValue={lesson}/>\r\n              <input style={{background:\"none\"}} type=\"submit\" value=\"move to lesson\" />\r\n            </form></div>)\r\n}\r\n\r\nfunction SelectLessonForm({lesson, handleSelectLesson}){\r\n  return (<div style={{ margin:\"15px\", width:\"100%\", textAlign:\"center\"}}>\r\n        <form style={{ background:\"none\"}} onSubmit={handleSelectLesson}>\r\n              <input type=\"hidden\" name=\"id\" value={lesson.id}/>\r\n              <input style={{background:\"none\"}} type=\"submit\" value={\"Lesson \" + lesson.id + \" (\"+lesson.count+\")\"} />\r\n            </form></div>)\r\n}\r\n\r\nclass Editor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    \tfile:false,\r\n    \tlineTypes: lineTypes,\r\n    \tlines:[],\r\n      lesson: 1,\r\n      lessons:[],\r\n      showRaw: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    let lines = []\r\n\r\n    if(localStorage.getItem(this.props.router.query.course) === null){\r\n   \t\tlines = [];\r\n    \tlocalStorage.setItem('NEW', JSON.stringify(lines));\r\n    }else{\r\n    \tlines = JSON.parse(localStorage.getItem(this.props.router.query.course));\r\n    }\r\n\r\n    this.setState({\r\n    \tlines: lines,\r\n      lessons: this.getLessons(lines)\r\n    })\r\n}\r\n\r\ncomponentWillReceiveProps(newProps){\r\n  if(newProps.router.query.course !== this.props.router.query.course){\r\n    const lines = JSON.parse(localStorage.getItem(this.props.router.query.course))\r\n    this.setState({\r\n      lines: lines,\r\n      lessons: this.getLessons(lines)\r\n    })\r\n  }\r\n}\r\n\r\n  render() {\r\n  \t  const handleNewLine = this.handleNewLine.bind(this)\r\n  \t  const update = this.update.bind(this)\r\n  \t  const deleteLine = this.deleteLine.bind(this)\r\n      const moveToLesson = this.handleMoveToLesson.bind(this)\r\n      const lesson = this.state.lesson\r\n      const handleSelectLesson = this.handleSelectLesson.bind(this)\r\n      const showRaw = this.state.showRaw\r\n      const toggleRaw = this.toggleRaw.bind(this)\r\n      const copyTextToClipboard = this.copyTextToClipboard.bind(this)\r\n      let rawStyle = {}\r\n\r\n      if(showRaw){\r\n         rawStyle = {display:\"block\"}        \r\n      }\r\n    return (\r\n\t<div>\r\n\t      <Head>\r\n\t        <title>Block Editor | Youth Revelation Study</title>\r\n\t        <link rel=\"icon\" href=\"/favicon.ico\" />\r\n\t        <meta charset=\"UTF-8\" />\r\n\r\n\t      </Head>\r\n\r\n\t\t<main>\r\n\r\n    <h1 style={{borderBottom:\"solid 2px gray\", position:\"fixed\", top:\"0\", height:\"75px\", backgroundColor:\"white\", width:\"75%\", marginTop:\"0\"}}>Editor | Lesson {this.state.lesson} <button onClick={this.save.bind(this)}>SAVE</button><span style={{float:\"right\", fontSize:\".7rem\"}}><input type=\"file\" id=\"input-file\" onChange={this.getFile.bind(this)} /></span>\r\n    </h1>\r\n\r\n    <div style={{height:\"75px\"}}></div>\r\n\t    \r\n    \t <div className={eStyles.row}>\r\n        <div className={eStyles.column + \" \" + eStyles.smallColumn}>\r\n           {this.state.lessons.map(function(less, k){\r\n            return <SelectLessonForm key={k} lesson={less} handleSelectLesson={handleSelectLesson}/>\r\n           })}\r\n\r\n        </div>\r\n        <div className={eStyles.column}>\r\n\r\n                <NewLineForm index={0} handleNewLine={handleNewLine}/>\r\n\r\n              {this.state.lines.map(function(line, i){\r\n\r\n                if(line.lesson === lesson){\r\n                  \r\n                  return <div key={i}>\r\n                        \r\n                          <button onClick={toggleRaw}>raw</button> > \r\n                                <textarea \r\n                                 readOnly \r\n                                 className={eStyles.raw} style={rawStyle}\r\n                                 value={JSON.stringify(line)}\r\n                                 onClick={copyTextToClipboard}\r\n                              />\r\n\r\n                            <div className={eStyles.row}>\r\n                              <div className={eStyles.column}>\r\n                                <Line index={i} data={line} update={update} />\r\n                                <button style={{color:\"red\", marginLeft:\"15px\"}} onClick={(e)=>{\r\n                                  deleteLine(i)\r\n                                }}>x</button>\r\n                                <MoveToLessonForm index={i} lesson={line.lesson} handleMoveToLesson={moveToLesson}/>\r\n                                \r\n                              </div>\r\n\r\n                            <div className={eStyles.column} style={{paddingLeft:\"15px\"}}>\r\n                              <Line index={i} data={line} read={true}/>\r\n                            </div>\r\n\r\n                            <NewLineForm index={i+1} handleNewLine={handleNewLine}/>\r\n                          </div>\r\n\r\n                       </div>\r\n                  }\r\n              })}\r\n\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n\t\t</main>\r\n\r\n\r\n</div>\r\n    );\r\n  }\r\n\r\nsave(){\r\n\tconst txt = JSON.stringify(this.state.lines)\r\n\tlocalStorage.setItem(this.props.router.query.course, txt)\r\n\r\n\t// Start file download.\r\n\tthis.download(this.props.router.query.course+\".json\",txt);\r\n}\r\n\r\ndownload(filename, text) {\r\n  var element = document.createElement('a');\r\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\r\n  element.setAttribute('download', filename);\r\n\r\n  element.style.display = 'none';\r\n  document.body.appendChild(element);\r\n\r\n  element.click();\r\n\r\n  document.body.removeChild(element);\r\n}\r\n\r\ngetFile(event) {\r\n\tconst input = event.target\r\n  if ('files' in input && input.files.length > 0) {\r\n\t  const lines = this.placeFileContent(input.files[0]).then((lines)=>{\r\n\t  \tthis.setState({lines:lines, lessons: this.getLessons(lines)})\r\n\t  })\r\n\r\n  \t}\r\n}\r\n\r\nplaceFileContent(file) {\r\n\treturn this.readFileContent(file).then(content => {\r\n  \treturn JSON.parse(content)\r\n  }).catch(error => console.log(error))\r\n}\r\n\r\nreadFileContent(file) {\r\n\tconst reader = new FileReader()\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = event => resolve(event.target.result)\r\n    reader.onerror = error => reject(error)\r\n    reader.readAsText(file)\r\n  })\r\n}\r\n\r\nhandleNewLine(e){\r\n    e.preventDefault();\r\n\r\n    const lineType = e.target.lineType.value\r\n    const index = e.target.index.value\r\n\r\n    let newState = {...this.state}\r\n\r\n    if(lineType === \"raw\"){\r\n      newState.lines.splice(index, 0, {...JSON.parse(e.target.raw.value), lesson:this.state.lesson})\r\n    }else{\r\n      newState.lines.splice(index, 0, {...templates[lineType], lesson:this.state.lesson})  \r\n    }\r\n    \r\n    newState.lessons = this.getLessons(newState.lines)\r\n    this.setState({...newState})\r\n}\r\n\r\nhandleMoveToLesson(e){\r\n    e.preventDefault();\r\n    const lesson = parseInt(e.target.lesson.value)\r\n    const index = e.target.index.value\r\n\r\n    let newState = {...this.state}\r\n    newState.lines[index].lesson = lesson\r\n    newState.lessons = this.getLessons(newState.lines)\r\n\r\n    this.setState({...newState})\r\n}\r\n\r\nhandleSelectLesson(e){\r\n    e.preventDefault();\r\n    const id = e.target.id.value\r\n    let newState = {...this.state}\r\n    newState.lesson = parseInt(id)\r\n    this.setState({...newState})\r\n}\r\n\r\nupdate(line, data){\r\n    let newState = {...this.state}\r\n    newState.lines[line] = {...data}\r\n    newState.lessons = this.getLessons(newState.lines)\r\n    this.setState(newState)\r\n}\r\n\r\ndeleteLine(line){\r\n    let newData = {...this.state}\r\n    newData.lines.splice(line, 1);\r\n    newData.lessons = this.getLessons(newData.lines)\r\n    this.setState(newData)\r\n}\r\n\r\ngetLessons(lines){\r\n\r\n  let lessons = []\r\n  let i;\r\n  let id = 0;\r\n  let lindex = 0;\r\n\r\n  for(i = 0; i < lines.length; i++){\r\n    id = parseInt(lines[i].lesson)\r\n    lindex = id-1\r\n\r\n    if(lessons[lindex] === undefined){\r\n      lessons[lindex] = {id:id, count:1}\r\n    }else{\r\n      lessons[lindex] = {id:id, count:lessons[lindex].count+1}\r\n    }\r\n    \r\n  }\r\n\r\n  return lessons\r\n}\r\n\r\ntoggleRaw(e){\r\n  let newState = {...this.state}\r\n  newState.showRaw = !newState.showRaw\r\n  this.setState(newState)\r\n}\r\n\r\n  copyTextToClipboard(e){\r\n    const context = e.target;\r\n    context.select();\r\n    document.execCommand(\"copy\");\r\n    alert(\"Copied to clipoard!\" + context.value)\r\n  }\r\n\r\n}\r\nexport default withRouter(Editor)\r\n\r\n/*\r\n1-4 Ellyanna\r\n5-11 Jeremiah\r\n12-16 Benjamin\r\n17-22 Rosemary\r\n\r\n1. Summaries\r\n2. Conclusing of Book 1 sentence\r\n\r\n\t\t<Quiz line={1} questions={this.state.questions} updateQuestion={updateQuestion}/>\r\n\r\n    */"]},"metadata":{},"sourceType":"module"}